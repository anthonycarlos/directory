<p id="notice"><%= notice %></p>

<h1>Students</h1>

<%= form_tag(students_path, method: :get) do %>
  <%= label_tag :name %>
  <%= text_field_tag :name, params[:name] %>
  <% teachers_array = Teacher.all.order(:last).map { |teacher| ["#{teacher.title} #{teacher.last}", "#{teacher.title} #{teacher.last}"] } %>
  <%= label_tag :teacher %>
  <%= select_tag :teacher, options_for_select(teachers_array, params[:teacher]), :include_blank => true %>
  <% grades_array = Grade.all.map { |grade| [grade, grade] } %>
  <%= label_tag :grade %>
  <%= select_tag :grade, options_for_select(grades_array, params[:grade]), :include_blank => true %>
  <%= submit_tag 'Search', name: nil %>
<% end %>

<p>Showing <%= @students.count %> students. </p>

<table class="table table-responsive table-striped table-bordered table-hover">
  <thead class="thead-default">
    <tr>
      <th colspan="2">&nbsp;</th>
      <th>Name</th>
      <th>Teacher</th>
      <th>Grade</th>
      <th>Address</th>
      <th>Mother</th>
      <th>Father</th>
    </tr>
  </thead>

  <tbody>
    <% @students.each do |student| %>
      <tr>
        <td><%= link_to '', edit_student_path(student), class: 'fa fa-pencil fa-lg' %></td>
        <td><%= link_to '', student, method: :delete, data: { confirm: 'Are you sure?' }, class: "fa fa-trash-o fa-lg" %></td>
        <td><%= student.student_last %>, <%= student.student_first %></td>
        <td><%= student.teacher %></td>
        <td><%= student.grade %></td>
        <td style="word-break: break-all;">
          <%= display_address(student) %>
        </td>
        <td>
          <%= display_mother(student) %>
        </td>
        <td>
          <%= display_father(student) %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to new_student_path, class: "btn btn-default" do %>
  <i class="fa fa-plus fa-lg"></i>&nbsp;New Student
<% end %>
